<!doctype html><html lang="en"><head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>News — A&J Logistics</title>
  <link rel="stylesheet" href="/styles.css?v=2">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap" rel="stylesheet">

</head><body>
  <header class="site-header" style="background: #0e1030; color: #fff;" role="banner">
    <div class="container header-inner">
      <a href="/" class="brand" aria-label="A and J Logistics home">
        <img class="brand-logo" src="/images/A&J Logo (PNG).png" alt="A&J Logistics" />
      </a>
      <nav class="primary-nav" aria-label="Primary">
        <button class="nav-toggle" aria-expanded="false" aria-controls="nav-list"><span class="bar"></span><span class="bar"></span><span class="bar"></span></button>
        <ul id="nav-list" class="nav-list">
          <li><a data-i18n="nav.home" href="/">Home</a></li>
          <li><a data-i18n="nav.about" href="/#about">About Us</a></li>
          <li><a data-i18n="nav.services" href="/#services">Our Services</a></li>
          <li><a data-i18n="nav.products" href="/#products">Our Products</a></li>
          <li><a data-i18n="nav.news" href="/news">News</a></li>
          <li><a data-i18n="nav.contact" href="/#location">Contact</a></li>
        </ul>
        <button class="nav-close" aria-label="Close menu" aria-controls="nav-list" type="button">×</button>
      </nav>
      <div class="lang-switch" aria-label="Language selector">
        <button class="lang-btn" data-lang="jp" aria-pressed="false"><span class="flag-circle" aria-hidden="true"><img src="/images/jp.svg" width="20" height="15" alt="Japan" /></span><span class="label">JP</span></button>
        <button class="lang-btn" data-lang="en" aria-pressed="true"><span class="flag-circle" aria-hidden="true"><img src="/images/gb.svg" width="20" height="15" alt="English" /></span><span class="label">EN</span></button>
        <button class="lang-btn" data-lang="zh" aria-pressed="false"><span class="flag-circle" aria-hidden="true"><img src="/images/cn.svg" width="20" height="15" alt="中文" /></span><span class="label">中文</span></button>
      </div>
    </div>
  </header>

  <main class="section" style="padding-top: calc(var(--header-h,72px) + 24px)">
    <div class="container">
      <article id="article" class="article">
        <div id="loading">Loading…</div>
      </article>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-left">
        <div class="brand-row">
          <span class="brand-text">A&J Logistics</span>
          <div class="lang-switch small">
            <button class="lang-btn" data-lang="jp" aria-pressed="false"><span class="flag-circle"><img src="/images/jp.svg" width="20" height="15" alt="Japan" /></span><span class="label">JP</span></button>
            <button class="lang-btn" data-lang="en" aria-pressed="true"><span class="flag-circle"><img src="/images/gb.svg" width="20" height="15" alt="English" /></span><span class="label">EN</span></button>
            <button class="lang-btn" data-lang="zh" aria-pressed="false"><span class="flag-circle"><img src="/images/cn.svg" width="20" height="15" alt="中文" /></span><span class="label">中文</span></button>
          </div>
        </div>
        <p class="copy">© <span id="year"></span> A&J Logistics</p>
      </div>
      <div class="footer-right">
        <div class="contacts">
          <p><strong>MY</strong>: <a href="mailto:my@aj-logistics.com">my@aj-logistics.com</a>, <a href="tel:+6071234567">+60 7-123 4567</a></p>
          <p><strong>SG</strong>: <a href="mailto:sg@aj-logistics.com">sg@aj-logistics.com</a>, <a href="tel:+6562656942">(+65) 6265 6942</a></p>
        </div>
        <div class="policies">
          <a href="#" role="link">Terms</a>
          <a href="#" role="link">Privacy</a>
        </div>
      </div>
    </div>
  </footer>

   
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, query, where, limit, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
    import { firebaseConfig } from "/firebase-config.js";
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const parts = location.pathname.split('/').filter(Boolean);
    const slug = parts.length >= 2 ? decodeURIComponent(parts[1]) : '';
    const q = query(collection(db,'news'), where('slug','==',slug), where('published','==',true), limit(1));
    const snap = await getDocs(q);
    const el = document.getElementById('article');
    const d = snap.docs[0]?.data();
    if (!d) { el.innerHTML = '<p>Not found.</p>'; throw new Error('Not found'); }
    const date = d.publishedAt?.toDate ? d.publishedAt.toDate() : (d.publishedAt ? new Date(d.publishedAt) : new Date());
    const raw = [];
    if (d.coverUrl) raw.push(d.coverUrl);
    if (Array.isArray(d.imageUrls)) raw.push(...d.imageUrls);
    const images = Array.from(new Set(raw.filter(Boolean))).filter((u) => /^(https?:)?\//.test(String(u)));
    const hasGallery = images.length > 1;
    const gallery = hasGallery
      ? `
      <div class=\"news-gallery\">
        <button class=\"news-gallery-btn prev\" aria-label=\"Previous image\">◀</button>
        <div class=\"news-gallery-viewport\">
          <div class=\"news-gallery-track\">
            ${images.map(u => `<div class="news-gallery-slide"><img src="${u}" alt=""></div>`).join('')}
          </div>
        </div>
        <button class=\"news-gallery-btn next\" aria-label=\"Next image\">▶</button>
      </div>`
      : (images[0] ? `<div class=\"news-gallery single\"><div class=\"news-gallery-viewport\"><div class=\"news-gallery-track\"><div class=\"news-gallery-slide\"><img src=\"${images[0]}\" alt=\"\"></div></div></div></div>` : '');

    el.innerHTML = `
      ${gallery}
      <h1>${d.title || ''}</h1>
      <div class="meta">${date.toLocaleDateString()}${d.author?` · ${d.author}`:''}</div>
      <div class="content">${d.body || ''}</div>
      <p style="margin-top:16px;"><a class="btn btn-secondary" href="/news">← Back to news</a></p>
    `;
    document.title = (d.title || 'News') + ' — News';

    if (hasGallery) {
      const track = document.querySelector('.news-gallery-track');
      const prevBtn = document.querySelector('.news-gallery-btn.prev');
      const nextBtn = document.querySelector('.news-gallery-btn.next');
      if (track && prevBtn && nextBtn) {
        let index = 0;
        function update(){ track.style.transform = `translateX(-${index * 100}%)`; }
        prevBtn.addEventListener('click', () => { index = (index - 1 + images.length) % images.length; update(); });
        nextBtn.addEventListener('click', () => { index = (index + 1) % images.length; update(); });
      }
    }
  </script>
</body></html>


